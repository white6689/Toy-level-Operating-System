HQ
\\ip route 0.0.0.0 0.0.0.0 192.168.1.1 모든 네트워크로 갈때, next hope은 192.168.1.1여기로 가겠다!
BR에서
ip route 0.0.0.0 0.0.0.0 10.10.10.1 로 설정! 모든 네트워크로 갈때, next hope은 10.10.10.1여기로 가겠다!

02:06
NAT 설정하기
명령어들
HQ
\\int fa0/0
\\ip add 192.168.1.119 255.255.255.0
\\no sh
\\ do ping 8.8.8.8 ! 인터넷이 될 것이다.
! 구글로 가보자
\\ exit ! 
\\(config-t): exit
\\(config) ip name-server 8.8.8.8
\\(config) ip domain-lookup
\\(config) do ping www.google.com
! ICMP Echos to ip이름이 google의 이름이다!

BR
\\(config) do ping 8.8.8.8
! 안 될것이다!가긴 가는데 요청을 ISP에서 drop한다.
! 공인주소가 한개이기 때문에 PAT를 해야한다.
HQ
! 어떤 주소를 바꿀 것인가? 사설 주소를 지정할 것이다. 허용하는 아이피주소 ACLI
! any=0.0.0.0/0, 모든 사설 ip
\\(config) access-list 1 permit any
! 사설 주소를 공인 주소로 맵핑 할 것이다.
! 내부에 있는 출발지 주소는(사설 ip=so)는 list 1에 있다. 얘네들을 인터페이스 fa0/0에서 정해줄건데 오버로드 해줄게?
! inside=두개(사설 아이피 두개!)
\\(config) ip nat inside so list 1 int fa0/0 overload
! 부산 브랜치 네트워크
int fa0/1
ip nat inside!
! 헤드쿼터 네트워크
int fa1/0
ip nat inside
!인터넷 네트워크
int fa0/0
ip nat outside

==========<GNS3>==========
pc 1 오른버튼 start! (방화벽 풀기)
pc 2도 start!(방화벽 풀기)
pc1, pc2 콘솔로 열기!
============
pc1
! 아이피 설정, 게이트 웨이 설정, dns 서버 설정! 구글로 핑 보내보기(네트워크 되는지)
ip 10.10.100.0/24 10.10.100.1
ip dns 8.8.8.8
ping www.google.com

pc2
! 아이피 설정, 게이트 웨이 설정, dns 서버 설정! 구글로 핑 보내보기(네트워크 되는지)
ip 10.10.200.200/24 10.10.200.1
ip dns 8.8.8.8
ping www.google.com
! 지사에서 본사로 가는거 가능?
ping 10.10.100.100
==================
정상적으로 변환이 잘되서 가나? wireshark 캡쳐를 통해 확인한다.
cloud---(여기 캡쳐)---HQ--(여기 캡쳐)--BR---PC2
1. 지사에서 본사로 보내보기(pc2에서) 10.10.100.100
2. 인터넷으로 나가보기(pc2에서) www.google.com


====트러블 슈팅====
문제점을 찾아 해결해나가는 과정
무조건 가까운 쪽에서부터 점검해 나간다.

우리회사는 웹서비스 제공을 위하여 공인 주소를 구매하였다.
211.183.3.0/24 를 사용할 수 있고, 라우터에 HQ의 fa0/0에는 211.183.3.99를 할당한다.
ISP 주소는 211.183.3.2로 고정되어있다. 나머지 주소는 내부에서 자유롭게 사용할 수 있다.
이중 211.183.3.100은 본사와 지사에 있는 PC들이 동적 PAT를 통하여 인터넷과 연결이 가능하도록 할 계획이고, 
211.183.3.101은 본사내부에 있는 웹서버 10.10.100.100과 1:1로 정적 NAT를 구성하여 웹서비스를 제공할 계획이다.




4:11 아마존 둘러보기, vpc 다음
일반 vm: ISO와 같은 설치파일을 이용하여 OS 설치 작업을 수동으로 일일이 진행해야한다. 
상세한 설정이 가능하다는 점에서는 유용하다
하지만 클라우드 환경에는 적절하지 않다. 클라우드 상의 컴퓨터는 
몇 천대가 있으니까 일일히 관리 힘듦

인스턴스 VM: 클라우드용 이미지(OS가 설치된 환경을 이미지화 한 것=템플릿, 클래스)를 
이용하여 배포(deploy) 또는 찍어낸다.
단, 동일한 이미지를 사용함으로 만약 루트에 대한 패스워드를 설정한 상태에서
이미지화 했다면 모든 인스턴스는 동일한 패스워드를 사용해야하는
보안상 결함이 발생한다. 이를 해결핟기 위해 key-pair을 사용한다.
